<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Petit questionnaire pour toi ‚ù§Ô∏è</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fff0f5;
      padding: 2rem;
    }
    #form-container {
      background: #ffffff;
      padding: 2rem;
      max-width: 650px;
      margin: auto;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #e75480;
    }
    .question-block {
      display: none;
      margin-top: 1.5rem;
    }
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 0.5rem;
      color: #444;
    }
    input, textarea, select {
      width: 100%;
      padding: 0.7rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin-bottom: 1rem;
    }
    button {
      padding: 0.8rem 2rem;
      background-color: #e75480;
      color: white;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: #d13f6a;
    }
    .error {
      color: #e75480;
      margin-bottom: 1rem;
    }
    .success-message {
      text-align: center;
      font-size: 1.2rem;
      color: #e75480;
      margin-top: 2rem;
    }
    .nav-btn {
      margin-top: 1rem;
      display: flex;
      justify-content: space-between;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-10px); }
      40%, 80% { transform: translateX(10px); }
    }
    .shake {
      animation: shake 0.4s;
      border-color: #e75480 !important;
    }
  </style>
</head>
<body>

  <div id="form-container">
    <h2>Un petit moment rien que pour toi üíå</h2>
    <form id="questionnaire" action="https://formspree.io/f/mdkzokpg" method="POST">
      <div id="questions-wrapper"></div>
      <div id="success" class="success-message" style="display:none;">
        Merci mon c≈ìur üíå, je t‚Äôaime fort üíñ
      </div>
    </form>
  </div>

  <script>
    const questions = [
      { label: "Ton petit pr√©nom d‚Äôamour üíñ", type: "text", name: "Pr√©nom", required: true, check: val => val.trim().toLowerCase() === "mimoune", fail: "Mais t'es qui ? üò†" },
      { label: "Comment tu te sens aujourd‚Äôhui ? üòä", type: "text", name: "Humeur du jour", required: true },
      { label: "Note ta journ√©e sur 10 ‚≠ê", type: "number", name: "Note de la journ√©e", min: 0, max: 10, required: true },
      { label: "√Ä quel point es-tu fatigu√©e ? üò¥", type: "select", name: "Niveau de fatigue", options: ["Pas du tout", "Un peu", "Beaucoup", "Je suis √©puis√©e"], required: true },
      { label: "Qu‚Äôest-ce qui te ferait plaisir aujourd‚Äôhui ? üéÅ", type: "textarea", name: "Ce qui lui ferait plaisir", required: true },
      { label: "Tu veux un c√¢lin, un mot doux, ou juste du calme ? üß∏", type: "textarea", name: "Besoin de r√©confort", required: true },
      { label: "Est-ce que tu aimerais une surprise bient√¥t ? üéâ", type: "select", name: "Envie de surprise", options: ["Oui", "Non", "Peut-√™tre"], required: true },
      { label: "Quelque chose de chouette qui t‚Äôest arriv√© aujourd‚Äôhui ? üåû", type: "textarea", name: "Moment positif du jour", required: true },
      { label: "Quelque chose de difficile ou stressant aujourd‚Äôhui ? üòî", type: "textarea", name: "Moment difficile", required: true },
      { label: "Qu‚Äôas-tu envie de manger ou faire ce soir ? üçΩÔ∏èüíÜ‚Äç‚ôÄÔ∏è", type: "textarea", name: "Envie du soir", required: true },
      { label: "Un fantasme que tu aimerais r√©aliser bient√¥t ? üòè", type: "textarea", name: "Son fantasme du moment", required: true },
      { label: "Qu‚Äôest-ce que tu pr√©f√®res chez moi aujourd‚Äôhui ? ü•∫", type: "textarea", name: "Ce qu‚Äôelle aime chez moi", required: true },
      { label: "Un petit mot d‚Äôamour pour moi ? üí¨", type: "textarea", name: "Son mot d‚Äôamour", required: true },
    ];

    let current = 0;
    const form = document.getElementById('questionnaire');
    const wrapper = document.getElementById('questions-wrapper');
    const formData = {};

    function shakeInput(input) {
      input.classList.remove('shake');
      void input.offsetWidth;
      input.classList.add('shake');
    }

    function showQuestion(index) {
      wrapper.innerHTML = '';

      const q = questions[index];
      const div = document.createElement('div');
      div.className = 'question-block';

      const label = document.createElement('label');
      label.textContent = q.label;
      div.appendChild(label);

      let input;
      if (q.type === "textarea") {
        input = document.createElement('textarea');
        input.rows = 3;
      } else if (q.type === "select") {
        input = document.createElement('select');
        q.options.forEach(opt => {
          const o = document.createElement('option');
          o.value = opt;
          o.text = opt;
          input.appendChild(o);
        });
      } else {
        input = document.createElement('input');
        input.type = q.type;
        if (q.min) input.min = q.min;
        if (q.max) input.max = q.max;
      }

      input.name = q.name;
      input.id = "input-" + index;
      input.required = q.required || false;
      div.appendChild(input);

      const error = document.createElement('div');
      error.className = 'error';
      div.appendChild(error);

      const nav = document.createElement('div');
      nav.className = 'nav-btn';

      if (index > 0) {
        const back = document.createElement('button');
        back.type = "button";
        back.textContent = "‚¨Ö Revenir";
        back.onclick = () => showQuestion(index - 1);
        nav.appendChild(back);
      }

      const next = document.createElement('button');
      next.type = "button";
      next.textContent = index === questions.length - 1 ? "Envoyer üíå" : "Valider";
      next.onclick = () => {
        const val = input.value.trim();

        if (index === 0) {
          if (val === "") {
            error.textContent = "mdrr bah va t'en";
            shakeInput(input);
            return;
          }
          if (q.check && !q.check(val)) {
            error.textContent = q.fail;
            shakeInput(input);
            return;
          }
          error.textContent = "";
          formData[q.name] = val;
          if (index === questions.length - 1) {
            sendData();
          } else {
            showQuestion(index + 1);
          }
          return;
        }

        if (q.required && val === "") {
          error.textContent = "T‚Äôes s√ªre ? Tu veux rien me dire √† ce sujet ? üò¢";
          shakeInput(input);
          return;
        }

        error.textContent = "";
        formData[q.name] = val;
        if (index === questions.length - 1) {
          sendData();
        } else {
          showQuestion(index + 1);
        }
      };
      nav.appendChild(next);

      div.appendChild(nav);
      wrapper.appendChild(div);
      div.style.display = "block";
      input.focus();
    }

    function sendData() {
      const hiddenInputs = Object.entries(formData).map(([key, val]) => {
        const input = document.createElement('input');
        input.type = "hidden";
        input.name = key;
        input.value = val;
        return input;
      });
      hiddenInputs.forEach(i => form.appendChild(i));

      wrapper.innerHTML = "";
      const message = document.createElement('div');
      message.className = 'success-message';
      message.textContent = "Merci mon c≈ìur üíå, ton message a bien √©t√© envoy√©, je t‚Äôaime fort üíñ";
      wrapper.appendChild(message);

      setTimeout(() => {
        form.submit();
      }, 2500);
    }

    showQuestion(current);
  </script>

</body>
</html>
